{"ast":null,"code":"import _classCallCheck from \"/opt/lampp/htdocs/NodeJs/gereja/gereja-fe/shard/Source Files/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/opt/lampp/htdocs/NodeJs/gereja/gereja-fe/shard/Source Files/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/opt/lampp/htdocs/NodeJs/gereja/gereja-fe/shard/Source Files/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/opt/lampp/htdocs/NodeJs/gereja/gereja-fe/shard/Source Files/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/opt/lampp/htdocs/NodeJs/gereja/gereja-fe/shard/Source Files/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/opt/lampp/htdocs/NodeJs/gereja/gereja-fe/shard/Source Files/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/opt/lampp/htdocs/NodeJs/gereja/gereja-fe/shard/Source Files/src/components/keluargas/show.js\";\nimport React, { Fragment } from \"react\";\nimport axios from \"axios\";\nimport DataTable from 'react-data-table-component';\nimport PageTitle from \"../common/PageTitle\";\nimport { Col, Card, CardHeader, CardBody, CardFooter, Container, Row, ListGroup, ListGroupItem, Button } from \"shards-react\";\n\nvar Show = /*#__PURE__*/function (_React$Component) {\n  _inherits(Show, _React$Component);\n\n  function Show(props) {\n    var _this;\n\n    _classCallCheck(this, Show);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Show).call(this, props)); // Bind Functions\n\n    _this.addRecord = _this.addRecord.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.changeGroup = _this.changeGroup.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      id: null,\n      anggota_keluarga: [],\n      group: {},\n      columns: [{\n        name: 'Status',\n        selector: 'status_keluarga.name',\n        sortable: true\n      }, {\n        name: 'Nama',\n        selector: 'nama',\n        sortable: true\n      }, {\n        name: 'Nama Panggilan',\n        selector: 'nama_panggilan',\n        sortable: true\n      }, {\n        name: 'Gender',\n        selector: 'gender',\n        sortable: true\n      }, {\n        key: \"action\",\n        text: \"Action\",\n        className: \"action\",\n        width: 100,\n        align: \"left\",\n        sortable: false,\n        cell: function cell(record) {\n          return /*#__PURE__*/React.createElement(Fragment, {\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(\"button\", {\n            className: \"ml-auto btn btn-outline-accent btn-sm\",\n            onClick: function onClick() {\n              return _this.showRecord(record);\n            },\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 33\n            }\n          }, \"Detail\"));\n        }\n      }]\n    };\n    return _this;\n  }\n\n  _createClass(Show, [{\n    key: \"showRecord\",\n    value: function showRecord(record) {\n      window.location.href = \"/admin/anggota-keluarga/show/\" + record.id;\n    }\n  }, {\n    key: \"addRecord\",\n    value: function addRecord() {\n      window.location.href = \"/admin/keluarga/tambah-anggota/\" + this.state.id;\n    }\n  }, {\n    key: \"changeGroup\",\n    value: function changeGroup() {\n      window.location.href = \"/admin/keluarga/edit-group/\" + this.state.id;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      console.log('Component /Keluargas/show.js | Function componentDidMount');\n      this.getKeluarga(this.props.id).then(function (keluarga) {\n        _this2.getGroup(keluarga[0].group.id).then(function (group) {\n          _this2.getAnggotaKeluarga(_this2.props.id).then(function (anggota_keluarga) {\n            console.log(anggota_keluarga);\n            console.log(keluarga[0].family_members);\n\n            _this2.setState({\n              id: _this2.props.id,\n              anggota_keluarga: anggota_keluarga,\n              group: group[0]\n            });\n\n            console.log(group[0].ancestors);\n          });\n        });\n      });\n    }\n  }, {\n    key: \"getKeluarga\",\n    value: function getKeluarga(id) {\n      console.log('Component /Keluargas/show.js | Function getKeluarga');\n      return new Promise(function (resolve, reject) {\n        var config = {\n          headers: {\n            Authorization: 'Bearer ' + localStorage.getItem('jwt')\n          }\n        };\n        axios.get('keluargas?id=' + id, config).then(function (res) {\n          resolve(res.data);\n        }).catch(function (err) {\n          reject(err);\n          console.error('There was an error!', err);\n        });\n      });\n    }\n  }, {\n    key: \"getAnggotaKeluarga\",\n    value: function getAnggotaKeluarga(id) {\n      console.log('Component /Keluargas/show.js | Function getAnggotaKeluarga');\n      return new Promise(function (resolve, reject) {\n        var config = {\n          headers: {\n            Authorization: 'Bearer ' + localStorage.getItem('jwt')\n          }\n        };\n        axios.get('family-members?family.id=' + id, config).then(function (res) {\n          resolve(res.data);\n        }).catch(function (err) {\n          reject(err);\n          console.error('There was an error!', err);\n        });\n      });\n    }\n  }, {\n    key: \"getGroup\",\n    value: function getGroup(id) {\n      console.log('Component /Keluargas/show.js | Function getGroups.');\n      return new Promise(function (resolve, reject) {\n        var config = {\n          headers: {\n            Authorization: 'Bearer ' + localStorage.getItem('jwt')\n          }\n        };\n        axios.get('groups?id=' + id, config).then(function (res) {\n          resolve(res.data);\n        }).catch(function (err) {\n          reject(err);\n          console.error('There was an error!', err);\n        });\n      });\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(id) {\n      console.log(\"edit \" + id);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      console.log('Component /Keluargas/show.js | Function render');\n      var anggota_keluarga = [];\n\n      if (this.state.anggota_keluarga != null && Array.isArray(this.state.anggota_keluarga)) {\n        anggota_keluarga = this.state.anggota_keluarga;\n      }\n\n      var group_ancestors = [];\n\n      if (this.state.group.ancestors != null) {\n        this.state.group.ancestors.map(function (group, i) {\n          if (group.group_category == 1) {\n            group.type_name = \"Katedral\";\n          } else if (group.group_category == 2) {\n            group.type_name = \"Paroki\";\n          } else if (group.group_category == 3) {\n            group.type_name = \"Lingkungan\";\n          } else if (group.group_category == 4) {\n            group.type_name = \"KBG\";\n          } else {\n            group.type_name = \"Other\";\n          }\n        });\n        group_ancestors = this.state.group.ancestors;\n      }\n\n      return /*#__PURE__*/React.createElement(Container, {\n        fluid: true,\n        className: \"main-content-container px-4 pb-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        noGutters: true,\n        className: \"page-header py-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(PageTitle, {\n        sm: \"4\",\n        title: \"Keluarga\",\n        subtitle: \"Data Keluarga\",\n        className: \"text-sm-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        lg: \"9\",\n        md: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        small: true,\n        className: \"mb-4 overflow-hidden\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        className: \"border-bottom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 33\n        }\n      }, \"Data Keluarga\\xA0\", /*#__PURE__*/React.createElement(Button, {\n        outline: true,\n        theme: \"accent\",\n        size: \"sm\",\n        className: \"ml-auto\",\n        onClick: this.addRecord,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-plus\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 37\n        }\n      }), \" Tambah Anggota\"))), /*#__PURE__*/React.createElement(CardBody, {\n        className: \"p-0 pb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(DataTable, {\n        columns: this.state.columns,\n        data: anggota_keluarga // pagination\n        // sortIcon\n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(CardFooter, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 29\n        }\n      }))), /*#__PURE__*/React.createElement(Col, {\n        lg: \"3\",\n        md: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        small: true,\n        className: \"mb-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        className: \"border-bottom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"m-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 33\n        }\n      }, \"Group\")), /*#__PURE__*/React.createElement(CardBody, {\n        className: \"p-0 pb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(ListGroup, {\n        flush: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(ListGroupItem, {\n        className: \"p-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 37\n        }\n      }, group_ancestors.map(function (group, i) {\n        console.log(\"Entered\"); // Return the element. Also pass key     \n\n        return /*#__PURE__*/React.createElement(\"span\", {\n          className: \"d-flex mb-2\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 45\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"material-icons mr-1\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 45\n          }\n        }, \"flag\"), /*#__PURE__*/React.createElement(\"strong\", {\n          className: \"mr-1\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 45\n          }\n        }, group.type_name, \" : \"), /*#__PURE__*/React.createElement(\"strong\", {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 45\n          }\n        }, group.name));\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"d-flex\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"material-icons mr-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 37\n        }\n      }, \"flag\"), /*#__PURE__*/React.createElement(\"strong\", {\n        className: \"mr-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 41\n        }\n      }, \"KBG : \", this.state.group.hasOwnProperty('name') ? this.state.group.name : ''))))), /*#__PURE__*/React.createElement(CardFooter, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        outline: true,\n        theme: \"accent\",\n        size: \"sm\",\n        className: \"ml-auto\",\n        onClick: this.changeGroup,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-edit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 37\n        }\n      }), \" Ubah\"))))));\n    }\n  }]);\n\n  return Show;\n}(React.Component);\n\nexport default Show;","map":{"version":3,"sources":["/opt/lampp/htdocs/NodeJs/gereja/gereja-fe/shard/Source Files/src/components/keluargas/show.js"],"names":["React","Fragment","axios","DataTable","PageTitle","Col","Card","CardHeader","CardBody","CardFooter","Container","Row","ListGroup","ListGroupItem","Button","Show","props","addRecord","bind","changeGroup","state","id","anggota_keluarga","group","columns","name","selector","sortable","key","text","className","width","align","cell","record","showRecord","window","location","href","console","log","getKeluarga","then","keluarga","getGroup","getAnggotaKeluarga","family_members","setState","ancestors","Promise","resolve","reject","config","headers","Authorization","localStorage","getItem","get","res","data","catch","err","error","Array","isArray","group_ancestors","map","i","group_category","type_name","hasOwnProperty","Component"],"mappings":"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","sourcesContent":["import React, {Fragment} from \"react\";\nimport axios from \"axios\";\nimport DataTable from 'react-data-table-component';\nimport PageTitle from \"../common/PageTitle\";\nimport {\n    Col,\n    Card,\n    CardHeader,\n    CardBody,\n    CardFooter,\n    Container,\n    Row,\n    ListGroup,\n    ListGroupItem,\n    Button,\n} from \"shards-react\";\n\n\n\n\nclass Show extends React.Component {\n    constructor(props) {\n        super(props);\n        // Bind Functions\n        this.addRecord = this.addRecord.bind(this);\n        this.changeGroup = this.changeGroup.bind(this);\n        \n        this.state = {\n            id: null,\n            anggota_keluarga: [],\n            group: {},\n            columns: [\n                \n                {\n                    name: 'Status',\n                    selector: 'status_keluarga.name',\n                    sortable: true,\n                },\n                {\n                    name: 'Nama',\n                    selector: 'nama',\n                    sortable: true,\n                },\n                {\n                    name: 'Nama Panggilan',\n                    selector: 'nama_panggilan',\n                    sortable: true,\n                },\n                {\n                    name: 'Gender',\n                    selector: 'gender',\n                    sortable: true,\n                },\n                {\n                    key: \"action\",\n                    text: \"Action\",\n                    className: \"action\",\n                    width: 100,\n                    align: \"left\",\n                    sortable: false,\n                    cell: record => { \n                        return (\n                            <Fragment>\n                                <button \n                                    className=\"ml-auto btn btn-outline-accent btn-sm\"\n                                    onClick={() => this.showRecord(record)}\n                                >\n                                    Detail\n                                </button>\n                            </Fragment>\n                        );\n                    }\n                }\n            ]\n        }\n\n        \n        \n    }\n\n    showRecord(record){\n        window.location.href = \"/admin/anggota-keluarga/show/\"+record.id;\n    }\n\n    addRecord(){\n        window.location.href = \"/admin/keluarga/tambah-anggota/\"+this.state.id;\n    }\n\n    changeGroup(){\n        window.location.href = \"/admin/keluarga/edit-group/\"+this.state.id;\n    }\n\n\n\n    componentDidMount() {\n        console.log('Component /Keluargas/show.js | Function componentDidMount');\n        this.getKeluarga(this.props.id)\n        .then(keluarga => {\n            this.getGroup(keluarga[0].group.id)\n            .then(group => {\n                \n\n                this.getAnggotaKeluarga(this.props.id).then(anggota_keluarga=>{\n                    console.log(anggota_keluarga);\n                    console.log(keluarga[0].family_members);\n                    this.setState({\n                        id: this.props.id,\n                        anggota_keluarga: anggota_keluarga,\n                        group: group[0]\n                    });\n                    console.log(group[0].ancestors);\n                })\n            })\n        });\n    }\n\n    getKeluarga(id){\n        console.log('Component /Keluargas/show.js | Function getKeluarga');\n        return new Promise((resolve, reject)=>{\n            const config = {\n                headers:{\n                    Authorization: 'Bearer '+localStorage.getItem('jwt')\n                }\n            };\n            axios.get('keluargas?id='+id, config)\n            .then(res => {\n                resolve(res.data);\n            })\n            .catch(err => {\n                reject(err);\n                console.error('There was an error!', err);\n            });\n        })\n    }\n\n    getAnggotaKeluarga(id){\n        console.log('Component /Keluargas/show.js | Function getAnggotaKeluarga');\n        return new Promise((resolve, reject)=>{\n            const config = {\n                headers:{\n                    Authorization: 'Bearer '+localStorage.getItem('jwt')\n                }\n            };\n            axios.get('family-members?family.id='+id, config)\n            .then(res => {\n                resolve(res.data);\n            })\n            .catch(err => {\n                reject(err);\n                console.error('There was an error!', err);\n            });\n        })\n    }\n\n    getGroup(id){\n        console.log('Component /Keluargas/show.js | Function getGroups.');\n        return new Promise((resolve, reject)=>{\n            const config = {\n                headers:{\n                    Authorization: 'Bearer '+localStorage.getItem('jwt')\n                }\n            };\n            axios.get('groups?id='+id, config)\n            .then(res => {\n                resolve(res.data);\n            })\n            .catch(err => {\n                reject(err);\n                console.error('There was an error!', err);\n            });\n        })\n    }\n\n    handleClick(id){\n        console.log(\"edit \"+id);\n    }   \n\n\n    render() {\n        console.log('Component /Keluargas/show.js | Function render');\n        let anggota_keluarga = [];\n        if(this.state.anggota_keluarga != null && Array.isArray(this.state.anggota_keluarga)){\n            anggota_keluarga = this.state.anggota_keluarga;\n        }\n\n        let group_ancestors = [];\n        if(this.state.group.ancestors != null){\n            this.state.group.ancestors.map((group, i) => {     \n                if(group.group_category == 1){\n                    group.type_name = \"Katedral\"\n                }else if(group.group_category == 2){\n                    group.type_name = \"Paroki\"\n                }else if(group.group_category == 3){\n                    group.type_name = \"Lingkungan\"\n                }else if(group.group_category == 4){\n                    group.type_name = \"KBG\"\n                }else {\n                    group.type_name = \"Other\"\n                }\n                \n            })\n            group_ancestors = this.state.group.ancestors;\n\n        }\n        \n        \n        return (\n            <Container fluid className=\"main-content-container px-4 pb-4\">\n                <Row noGutters className=\"page-header py-4\">\n                    <PageTitle sm=\"4\" title=\"Keluarga\" subtitle=\"Data Keluarga\" className=\"text-sm-left\" />\n                </Row>\n                <Row>\n                {/* Editor */}\n                    <Col lg=\"9\" md=\"12\">\n                        <Card small className=\"mb-4 overflow-hidden\">\n                            <CardHeader className=\"border-bottom\">\n                                <h6 className=\"\">Data Keluarga&nbsp;\n                                <Button outline theme=\"accent\" size=\"sm\" className=\"ml-auto\" onClick={this.addRecord}>\n                                    <i className=\"fa fa-plus\"></i> Tambah Anggota\n                                </Button>\n                                </h6>\n                            </CardHeader>\n                            <CardBody className=\"p-0 pb-3\">\n                            <DataTable\n                                    columns={this.state.columns}\n                                    data={anggota_keluarga}\n                                    // pagination\n                                    // sortIcon\n                                />\n                                {/* <table className=\"table\">\n                                    <thead className=\"bg-light\">\n                                        <tr>\n                                            <th scope=\"col\" className=\"border-0\">\n                                                Status\n                                            </th>\n                                            <th scope=\"col\" className=\"border-0\">\n                                                Nama Panggilan\n                                            </th>\n                                            <th scope=\"col\" className=\"border-0\">\n                                                Nama Lengkap\n                                            </th>\n                                            <th scope=\"col\" className=\"border-0\">\n                                                Agama\n                                            </th>\n                                            <th scope=\"col\" className=\"border-0\">\n                                                Pendidikan\n                                            </th>\n                                            <th scope=\"col\" className=\"border-0\">\n                                                Pekerjaan\n                                            </th>\n                                            <th scope=\"col\" className=\"border-0\">\n                                                \n                                            </th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {anggota_keluarga.map(function(keluarga, i){\n                                            return (\n                                                <tr className=\"\">\n                                                    <td>{keluarga.relasi_family}</td>\n                                                    <td>{keluarga.nama_panggilan}</td>\n                                                    <td>{keluarga.nama}</td>\n                                                    <td>{keluarga.agama}</td>\n                                                    <td></td>\n                                                    <td></td>\n                                                    <td>\n                                                        <Button theme=\"accent\" size=\"sm\" className=\"ml-auto\" >\n                                                            <i className=\"fa fa-edit\"></i> Ubah\n                                                        </Button>\n                                                    </td>\n                                                </tr>\n                                            )\n                                                \n                                        })}\n                                        \n                                    </tbody>\n                                </table> */}\n                            </CardBody>\n                            <CardFooter>\n                                \n                            </CardFooter>\n                        </Card>\n                    </Col>\n\n                    {/* Sidebar Widgets */}\n                    <Col lg=\"3\" md=\"12\">\n                        <Card small className=\"mb-4\">\n                            <CardHeader className=\"border-bottom\">\n                                <h6 className=\"m-0\">Group</h6>\n                                \n                            </CardHeader>\n                            <CardBody className=\"p-0 pb-3\">\n                                <ListGroup flush>\n                                    <ListGroupItem className=\"p-3\">\n                                    {\n                                    group_ancestors.map((group, i) => {     \n                                        console.log(\"Entered\");                 \n                                        // Return the element. Also pass key     \n                                        return (\n                                            <span className=\"d-flex mb-2\">\n                                            <i className=\"material-icons mr-1\">flag</i>\n                                            <strong className=\"mr-1\">{ group.type_name } : </strong>\n                                            <strong >{ group.name }</strong>\n                                            </span>\n                                        ) \n                                    })\n                                    }\n                                    <span className=\"d-flex\">\n                                    <i className=\"material-icons mr-1\">flag</i>\n                                        <strong className=\"mr-1\">KBG : {(this.state.group.hasOwnProperty('name')) ? this.state.group.name : ''}</strong>\n                                        \n                                    </span>\n                                    </ListGroupItem>\n                                    \n                                </ListGroup>\n                            </CardBody>\n                            <CardFooter>\n                                <Button outline theme=\"accent\" size=\"sm\" className=\"ml-auto\" onClick={this.changeGroup}>\n                                    <i className=\"fa fa-edit\"></i> Ubah\n                                </Button>\n                            </CardFooter>\n                        </Card>\n                    </Col>\n                </Row>\n                \n            </Container>\n\n            \n        )\n    }\n}\n\nexport default Show;\n"]},"metadata":{},"sourceType":"module"}