{"ast":null,"code":"import _classCallCheck from \"/opt/lampp/htdocs/NodeJs/gereja/gereja-fe/shard/Source Files/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/opt/lampp/htdocs/NodeJs/gereja/gereja-fe/shard/Source Files/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/opt/lampp/htdocs/NodeJs/gereja/gereja-fe/shard/Source Files/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/opt/lampp/htdocs/NodeJs/gereja/gereja-fe/shard/Source Files/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/opt/lampp/htdocs/NodeJs/gereja/gereja-fe/shard/Source Files/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/opt/lampp/htdocs/NodeJs/gereja/gereja-fe/shard/Source Files/src/views/UpdateGroup.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { Container, Col } from \"shards-react\";\nimport { withRouter } from \"react-router\";\nimport Index from \"../components/keluargas/index\";\nimport Show from \"../components/keluargas/show\";\nimport Form from \"../components/anggota-keluarga/form\";\nimport { ThemeConsumer } from \"styled-components\";\n\nvar UpdateGroup = /*#__PURE__*/function (_React$Component) {\n  _inherits(UpdateGroup, _React$Component);\n\n  function UpdateGroup(props) {\n    var _this;\n\n    _classCallCheck(this, UpdateGroup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UpdateGroup).call(this, props));\n    _this.state = {\n      id: 0\n    };\n    return _this;\n  }\n\n  _createClass(UpdateGroup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getFamilies().then(function (families) {\n        console.log(families);\n        families.map(function (family, i) {\n          console.log(family);\n          var uid = family.uid; // this.updateGroup(family);\n        });\n      });\n    }\n  }, {\n    key: \"getFamilies\",\n    value: function getFamilies() {\n      return new Promise(function (resolve, reject) {\n        var config = {\n          headers: {\n            Authorization: 'Bearer ' + localStorage.getItem('jwt')\n          }\n        };\n        axios.get('keluargas?uid_contains=001-002-0021', config).then(function (res) {\n          resolve(res.data);\n        }).catch(function (err) {\n          reject(err);\n          console.error('There was an error!', err);\n        });\n      });\n    }\n  }, {\n    key: \"updateGroup\",\n    value: function updateGroup(keluarga) {\n      var _this2 = this;\n\n      console.log(keluarga.uid);\n      keluarga.family_members.map(function (family_member, i) {\n        var index_plus = i + 1;\n        var index_new;\n\n        if (_this2.countDigit(index_plus) == 1) {\n          index_new = \"00\" + index_plus;\n        } else if (_this2.countDigit(index_plus) == 2) {\n          index_new = \"0\" + index_plus;\n        } else if (_this2.countDigit(index_plus) == 3) {\n          index_new = \"\" + index_plus;\n        }\n\n        family_member.uid = keluarga.uid + \"-\" + index_new;\n        var headers = {\n          'Content-Type': 'application/json',\n          Authorization: 'Bearer ' + localStorage.getItem('jwt')\n        };\n        var data = family_member;\n        axios.put('/family-members/' + family_member.id, data, {\n          headers: headers\n        }).then(function (response) {\n          console.log(\"Update Berhasil\");\n        }).catch(function (error) {\n          alert(\"Update Gagal !, \" + error);\n        });\n      });\n      var headers = {\n        'Content-Type': 'application/json',\n        Authorization: 'Bearer ' + localStorage.getItem('jwt')\n      };\n      var data = keluarga;\n      data.is_update_anggota_uid = 1;\n      axios.put('/keluargas/' + keluarga.id, data, {\n        headers: headers\n      }).then(function (response) {\n        console.log(\"Update Berhasil\");\n      }).catch(function (error) {\n        alert(\"Update Gagal !, \" + error);\n      });\n    }\n  }, {\n    key: \"countDigit\",\n    value: function countDigit(number) {\n      var string_number = number.toString();\n      var number_arr = string_number.split();\n      return number_arr.length;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }\n      }, \"UpdateGroup\");\n    }\n  }]);\n\n  return UpdateGroup;\n}(React.Component);\n\nexport default withRouter(UpdateGroup);","map":{"version":3,"sources":["/opt/lampp/htdocs/NodeJs/gereja/gereja-fe/shard/Source Files/src/views/UpdateGroup.js"],"names":["React","axios","Container","Col","withRouter","Index","Show","Form","ThemeConsumer","UpdateGroup","props","state","id","getFamilies","then","families","console","log","map","family","i","uid","Promise","resolve","reject","config","headers","Authorization","localStorage","getItem","get","res","data","catch","err","error","keluarga","family_members","family_member","index_plus","index_new","countDigit","put","response","alert","is_update_anggota_uid","number","string_number","toString","number_arr","split","length","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport { Container, Col } from \"shards-react\";\nimport { withRouter } from \"react-router\";\nimport Index from \"../components/keluargas/index\";\nimport Show from \"../components/keluargas/show\";\nimport Form from \"../components/anggota-keluarga/form\";\nimport { ThemeConsumer } from \"styled-components\";\n\nclass UpdateGroup extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            id: 0,\n        }\n    }\n\n    componentDidMount() {\n        this.getFamilies().then( (families) =>{\n            console.log(families);\n            \n            \n            \n            families.map((family, i)=>{\n                console.log(family);\n                let uid = family.uid;\n                // this.updateGroup(family);\n            })\n        });\n    }\n\n    getFamilies(){\n        return new Promise((resolve, reject)=>{\n            const config = {\n                headers:{\n                    Authorization: 'Bearer '+localStorage.getItem('jwt')\n                }\n            };\n            axios.get('keluargas?uid_contains=001-002-0021', config)\n            .then(res => {\n                resolve(res.data);\n            })\n            .catch(err => {\n                reject(err);\n                console.error('There was an error!', err);\n            });\n        }) \n    }\n\n    updateGroup(keluarga){\n        \n        console.log(keluarga.uid);\n        keluarga.family_members.map((family_member, i)=>{\n            let index_plus = i+1;\n            let index_new;\n            if(this.countDigit(index_plus) == 1){\n                index_new = \"00\"+index_plus;\n            }else if(this.countDigit(index_plus) == 2){\n                index_new = \"0\"+index_plus;\n            }else if(this.countDigit(index_plus) == 3){\n                index_new = \"\"+index_plus;\n            }\n            family_member.uid = keluarga.uid+\"-\"+index_new;\n            \n            const headers = { \n                'Content-Type': 'application/json',\n                Authorization: 'Bearer '+localStorage.getItem('jwt')\n            };\n    \n            let data = family_member;\n            axios.put('/family-members/'+family_member.id, data, {headers})\n            .then(response => {\n                console.log(\"Update Berhasil\");\n            })\n            .catch(error => {\n                alert(\"Update Gagal !, \"+error);\n            });\n            \n        })\n\n        const headers = { \n            'Content-Type': 'application/json',\n            Authorization: 'Bearer '+localStorage.getItem('jwt')\n        };\n\n        let data = keluarga;\n        data.is_update_anggota_uid = 1;\n        axios.put('/keluargas/'+keluarga.id, data, {headers})\n        .then(response => {\n            console.log(\"Update Berhasil\");\n        })\n        .catch(error => {\n            alert(\"Update Gagal !, \"+error);\n        });\n    }\n\n    countDigit(number){\n        let string_number = number.toString();\n        let number_arr = string_number.split();\n        return number_arr.length;\n    }\n    \n    \n\n\n    \n\n    render(){\n        return(\n            <h1>UpdateGroup</h1>\n        );\n    }\n    \n}\n\nexport default withRouter(UpdateGroup);\n"]},"metadata":{},"sourceType":"module"}